{% extends "layout.html" %}

{% block title %}
    Messages
{% endblock %}

{% block main %}

<center>
    <div class="w-95% hidden md:block">
        {% if no_messages == False %}
            {% for message in messages %}
                    <div id="message{{ message.id }}">
                        <p>{{ message.name }}</p>
                        <p>{{ message.date.strftime("%d %B %Y") }}</p>
                        <p>{{ message.email }}</p>
                        <p>{{ message.message }}</p>

                        {% if message.replied == True %}
                            <p>reply: {{ replies[message.id] }}</p>
                        {% else %}
                            <a href="{{ url_for('reply_message', message_id = message.id) }}"><button>reply</button></a><br>
                        {% endif %}

                        <a href="{{ url_for('delete_message', message_id = message.id) }}"><button id="delete_message{{ message.id }}">Delete Message</button></a><br>
                        
                        {% if message.read == True %}
                            <button id="read_message{{ message.id }}">Mark As Unread</button><br>
                        {% else %}
                            <button id="read_message{{ message.id }}">Mark As Read</button><br>
                        {% endif %}
                    </div>
                    <hr>
            {% endfor %}
        {% else %}
            <h3>No Messages</h3>
        {% endif %}
    </div>
</center>
{% endblock main %}
